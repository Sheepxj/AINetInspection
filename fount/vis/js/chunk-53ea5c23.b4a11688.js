(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53ea5c23"],{"21b4":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"page-breadcrumb"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/task/target"}}},[e._v("任务列表")]),e.taskName?i("el-breadcrumb-item",{attrs:{to:{path:"/task/target"}}},[e._v(e._s(e.taskName))]):e._e(),i("el-breadcrumb-item",[e._v(e._s(e.pageTitle)+" 监测任务")])],1),i("div",{staticClass:"text-primary pointer font-size-15",on:{click:e.fallback}},[e._v("返回列表")])],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-wrapper card"},[i("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"110px"}},[i("div",{staticClass:"form-container"},[i("div",{staticClass:"left-box"},[i("el-form-item",{attrs:{label:"任务名称",prop:"taskName"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入任务名称",maxlength:"10","show-word-limit":""},model:{value:e.form.taskName,callback:function(t){e.$set(e.form,"taskName",t)},expression:"form.taskName"}})],1),i("el-form-item",{attrs:{label:"任务描述",prop:"taskDesc"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入任务描述",rows:"3",resize:"none"},model:{value:e.form.taskDesc,callback:function(t){e.$set(e.form,"taskDesc",t)},expression:"form.taskDesc"}})],1),i("el-form-item",{attrs:{label:"任务优先级",prop:"taskLevel"}},[i("el-select",{attrs:{placeholder:"请选择任务优先级",size:"small"},model:{value:e.form.taskLevel,callback:function(t){e.$set(e.form,"taskLevel",t)},expression:"form.taskLevel"}},[i("el-option",{attrs:{label:"高",value:"高"}}),i("el-option",{attrs:{label:"中",value:"中"}}),i("el-option",{attrs:{label:"低",value:"低"}})],1)],1),i("el-form-item",{attrs:{label:"检测类型",prop:"detectType"}},[i("el-select",{attrs:{placeholder:"请选择检测类型",size:"small"},on:{input:e.handleDetectTypeChange},model:{value:e.form.detectType,callback:function(t){e.$set(e.form,"detectType",t)},expression:"form.detectType"}},[i("el-option",{attrs:{label:"闯入检测",value:"2"}}),i("el-option",{attrs:{label:"离开检测",value:"3"}})],1)],1),i("el-form-item",{attrs:{label:"算法模型",prop:"model"}},[i("el-select",{attrs:{placeholder:e.modelPlaceholder,filterable:"",multiple:"","multiple-limit":e.modelLimit,size:"small"},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}},e._l(e.modelList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),2==e.form.detectType||3==e.form.detectType?i("div",{staticClass:"form-control-merge"},[i("el-form-item",{attrs:{label:"目标数量",prop:"statsIntervalUnit"}},[i("el-select",{staticClass:"short-input",attrs:{placeholder:"请选择",size:"small"},model:{value:e.form.targetOperator,callback:function(t){e.$set(e.form,"targetOperator",t)},expression:"form.targetOperator"}},[i("el-option",{attrs:{label:"大于",value:"1"}}),i("el-option",{attrs:{label:"小于",value:"2"}}),i("el-option",{attrs:{label:"大于等于",value:"3"}}),i("el-option",{attrs:{label:"小于等于",value:"4"}}),i("el-option",{attrs:{label:"等于",value:"5"}})],1)],1),i("el-form-item",{attrs:{prop:"targetNumber"}},[i("el-input",{staticClass:"medium-input",attrs:{type:"number",size:"small",placeholder:"例：5",min:"1"},model:{value:e.form.targetNumber,callback:function(t){e.$set(e.form,"targetNumber",t)},expression:"form.targetNumber"}})],1)],1):e._e(),2==e.form.detectType?i("div",{staticClass:"form-control-merge"},[i("el-form-item",{attrs:{label:"目标停留时长",prop:"stayTiming"}},[i("el-input",{staticClass:"medium-input",attrs:{type:"number",size:"small",placeholder:"例：60",min:"1"},model:{value:e.form.stayTiming,callback:function(t){e.$set(e.form,"stayTiming",t)},expression:"form.stayTiming"}})],1),i("el-form-item",{attrs:{prop:"stayTimeUnit"}},[i("el-select",{staticClass:"short-input",attrs:{placeholder:"时长单位",size:"small"},model:{value:e.form.stayTimeUnit,callback:function(t){e.$set(e.form,"stayTimeUnit",t)},expression:"form.stayTimeUnit"}},[i("el-option",{attrs:{label:"秒钟",value:"秒钟"}}),i("el-option",{attrs:{label:"分钟",value:"分钟"}}),i("el-option",{attrs:{label:"小时",value:"小时"}})],1)],1)],1):e._e(),3==e.form.detectType?i("div",{staticClass:"form-control-merge"},[i("el-form-item",{attrs:{label:"目标离开时长",prop:"leaveTiming"}},[i("el-input",{staticClass:"medium-input",attrs:{type:"number",size:"small",placeholder:"例：60",min:"1"},model:{value:e.form.leaveTiming,callback:function(t){e.$set(e.form,"leaveTiming",t)},expression:"form.leaveTiming"}})],1),i("el-form-item",{attrs:{prop:"leaveTimeUnit"}},[i("el-select",{staticClass:"short-input",attrs:{placeholder:"时长单位",size:"small"},model:{value:e.form.leaveTimeUnit,callback:function(t){e.$set(e.form,"leaveTimeUnit",t)},expression:"form.leaveTimeUnit"}},[i("el-option",{attrs:{label:"秒钟",value:"秒钟"}}),i("el-option",{attrs:{label:"分钟",value:"分钟"}}),i("el-option",{attrs:{label:"小时",value:"小时"}})],1)],1)],1):e._e()],1),i("div",{staticClass:"right-box"},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{staticClass:"label-left",attrs:{label:"摄像头点位",prop:"location"}},[i("el-cascader",{attrs:{size:"small",options:e.locationList,clearable:"",placeholder:"请选择摄像头点位"},on:{change:e.handleLocationChange},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"视频抽帧级别",prop:"rateLevel"}},[i("el-select",{attrs:{placeholder:"请选择视频抽帧级别",size:"small"},model:{value:e.form.rateLevel,callback:function(t){e.$set(e.form,"rateLevel",t)},expression:"form.rateLevel"}},[i("el-option",{attrs:{label:"不抽帧",value:"0"}}),i("el-option",{attrs:{label:"低",value:"1"}}),i("el-option",{attrs:{label:"中",value:"2"}}),i("el-option",{attrs:{label:"高",value:"3"}})],1)],1)],1)],1),i("div",{staticClass:"el-form-item is-required"},[i("div",{staticClass:"el-form-item__label",staticStyle:{float:"none",width:"100%","text-align":"left"}},[e._v("框选电子围栏 ")]),i("div",{staticClass:"screen-container"},[i("div",{staticClass:"box-selection"},[i("live-player",{attrs:{containerId:"video-live",streamId:e.streamId,streamUrl:e.streamUrl,showPointer:!1},on:{updateLoading:e.updateLoading,drawMarkFrame:e.drawMarkFrame}}),i("div",{attrs:{id:"drawArea"}},[i("div",{staticClass:"frame-list"},e._l(e.markList,(function(t,a){return i("div",{key:a,staticClass:"frame-wrap"},[i("div",{staticClass:"outside-frame",style:{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",borderColor:e.activeFrameIndex==a?"#229fe7":"#ff0000",backgroundColor:e.activeFrameIndex==a?t.bgColor:"transparent",opacity:e.activeFrameIndex==a?.5:1},attrs:{id:t.index}},[i("span",{staticClass:"delete-btn",class:{inactive:e.activeFrameIndex!=a},on:{click:function(t){return t.stopPropagation(),e.removeFrame(a)},mousedown:function(e){e.stopPropagation()}}},[i("i",{staticClass:"el-icon-close"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:e.activeFrameIndex==a,expression:"activeFrameIndex == index"}],staticClass:"tl-horn"}),i("span",{directives:[{name:"show",rawName:"v-show",value:e.activeFrameIndex==a,expression:"activeFrameIndex == index"}],staticClass:"tc-horn"}),i("span",{directives:[{name:"show",rawName:"v-show",value:e.activeFrameIndex==a,expression:"activeFrameIndex == index"}],staticClass:"tr-horn"}),i("span",{directives:[{name:"show",rawName:"v-show",value:e.activeFrameIndex==a,expression:"activeFrameIndex == index"}],staticClass:"bl-horn"}),i("span",{directives:[{name:"show",rawName:"v-show",value:e.activeFrameIndex==a,expression:"activeFrameIndex == index"}],staticClass:"bc-horn"}),i("span",{directives:[{name:"show",rawName:"v-show",value:e.activeFrameIndex==a,expression:"activeFrameIndex == index"}],staticClass:"br-horn"}),i("span",{directives:[{name:"show",rawName:"v-show",value:e.activeFrameIndex==a,expression:"activeFrameIndex == index"}],staticClass:"lc-horn"}),i("span",{directives:[{name:"show",rawName:"v-show",value:e.activeFrameIndex==a,expression:"activeFrameIndex == index"}],staticClass:"rc-horn"})])])})),0)])],1)])])],1)])]),i("div",{staticClass:"bottom-actions"},[i("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")]),i("el-button",{attrs:{type:"primary",size:"small",disabled:e.loadingCamera},on:{click:e.submitTask}},[e._v("提 交")])],1)],1)])},o=[],s=(i("14d9"),i("3ce7")),l=i("247b"),r={components:{livePlayer:l["a"]},props:{},data(){return{pageTitle:"添加目标检测",taskName:"",loading:!1,form:{taskName:"",taskDesc:"",taskLevel:"",detectType:"",model:[],location:[],rateLevel:"0",targetOperator:"1",targetNumber:"",stayTiming:"",stayTimeUnit:"秒钟",leaveTiming:"",leaveTimeUnit:"秒钟",taskStatus:""},modelPlaceholder:"请选择算法模型(最多一个)",modelLimit:1,rules:{taskName:[{required:!0,message:"请输入任务名称",trigger:"blur"}],taskLevel:[{required:!0,message:"请选择任务优先级",trigger:"change"}],location:[{required:!0,message:"请选择摄像头点位",trigger:"change"}],rateLevel:[{required:!0,message:"请选择视频抽帧级别",trigger:"change"}],model:[{required:!0,message:"请选择算法模型",trigger:"change"}],detectType:[{required:!0,message:"请选择检测类型",trigger:"change"}]},detectPickerOptions:{disabledDate(e){const t=new Date;return t.setHours(0,0,0,0),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),e<t.getTime()}},modelList:[],timeList:[{label:"5秒",value:"5秒"},{label:"10秒",value:"10秒"},{label:"30秒",value:"30秒"},{label:"自定义秒钟",value:"自定义秒钟"}],locationList:[],markList:[],tempMarkList:[],activeFrameIndex:null,checkedTaskId:null,streamId:null,streamUrl:"",loadingCamera:!1}},created(){this.$route.query.id&&(this.pageTitle="编辑"+this.pageTitle.slice(2),this.checkedTaskId=this.$route.query.id),this.$route.query.name&&(this.taskName=this.$route.query.name),this.initLoading()},mounted(){document.addEventListener("click",this.handleClick)},beforeDestroy(){document.removeEventListener("click",this.handleClick)},watch:{},computed:{},methods:{initLoading(){var e=[Object(s["c"])(),Object(s["d"])()];this.checkedTaskId&&e.push(Object(s["e"])({Id:this.checkedTaskId})),Promise.all(e).then(e=>{if(this.drawerVisible=!0,200==e[0].code&&e[0].data.length>0&&e[0].data.forEach(e=>{this.modelList.push({label:e.modelName,value:e.id})}),200==e[1].code&&e[1].data.length>0&&e[1].data.forEach(e=>{var t={label:e.groupName,value:e.groupName},i=[];e.cameras.forEach(e=>{var t={label:e.cameraLocation,value:e.id,streamId:e.zlmId,streamUrl:e.zlmUrl};void 0!=e.cameraStatus&&(t.status=e.cameraStatus),void 0!=e.videoScale&&(t.videoScale=e.videoScale),i.push(t)}),t.children=i,this.locationList.push(t)}),this.checkedTaskId&&200==e[2].code){var t=e[2].data;Object.keys(t).length>0&&(this.form.taskName=t.taskName,this.form.taskDesc=t.taskDescription?t.taskDescription:"",this.form.taskLevel=t.alertLevel,this.form.model=/,/.test(t.ids)?t.ids=t.ids.split(",").map(e=>JSON.parse(e)):[JSON.parse(t.ids)],this.form.email=t.notificationEmail,this.form.location[0]=t.groupName,this.form.location[1]=t.cameraId,this.form.detectType=JSON.stringify(t.frameSelect),this.form.rateLevel=JSON.stringify(t.frameInterval),2==this.form.detectType&&(this.form.targetNumber=t.targetNumber,t.setTime&&(t.setTime<=60?(this.form.stayTiming=t.setTime,this.form.stayTimeUnit="秒钟"):t.setTime>60&&t.setTime<=3600?(this.form.stayTiming=t.setTime/60,this.form.stayTimeUnit="分钟"):(this.form.stayTiming=t.setTime/3600,this.form.stayTimeUnit="小时"))),3==this.form.detectType&&(this.form.targetNumber=t.targetNumber,t.setTime&&(t.setTime<=60?(this.form.leaveTiming=t.setTime,this.form.leaveTimeUnit="秒钟"):t.setTime>60&&t.setTime<=3600?(this.form.leaveTiming=t.setTime/60,this.form.leaveTimeUnit="分钟"):(this.form.leaveTiming=t.setTime/3600,this.form.leaveTimeUnit="小时"))),this.$nextTick(()=>{this.streamId=t.zlmId,this.streamUrl=t.zlmUrl,this.initDrawReact(),t.frameBoxs&&(this.tempMarkList=JSON.parse(t.frameBoxs))}))}}).finally(()=>{this.loading=!1})},drawMarkFrame(){if(this.tempMarkList.length>0){var e=document.querySelector("#drawArea"),t=e.offsetWidth,i=e.offsetHeight;this.tempMarkList.forEach((e,a)=>{var o={};o.left=t*e[0],o.top=i*e[1],o.width=t*e[2]-t*e[0],o.height=i*e[3]-i*e[1],o.index=a+1,this.markList.push(o)}),this.$nextTick(()=>{this.hornStretchEvent(),this.frameDragEvent()})}},updateLoading(e){this.loadingCamera=e},async handleLocationChange(e){this.markList=[];for(let t=0;t<this.locationList.length;t++){const i=this.locationList[t].children;if(i.length>0)for(let t=0;t<i.length;t++)if(i[t].value==e[1]){this.streamId=i[t].streamId,this.streamUrl=i[t].streamUrl,this.initDrawReact();break}}},submitTask(){this.$refs["ruleForm"].validate(e=>{if(e){if(0==this.markList.length)return void this.$message.error("请框选需要监测的监控区域");var t={};if(t.taskName=this.form.taskName,t.taskDescription=this.form.taskDesc,this.locationList.forEach(e=>{e.value==this.form.location[0]&&e.children.length>0&&e.children.forEach(e=>{e.value==this.form.location[1]&&(t.cameraPosition=e.label,t.cameraId=e.value)})}),t.alertLevel=this.form.taskLevel,t.notificationEmail=this.form.email,t.ids=this.form.model.join(","),t.status=0,t.frameInterval=this.form.rateLevel,this.markList.length>0){var i=[],a=document.querySelector("#drawArea"),o=a.offsetWidth,l=a.offsetHeight;this.markList.forEach(e=>{var t=[];t[0]=(e.left/o).toFixed(1),t[1]=(e.top/l).toFixed(1),t[2]=((e.left+e.width)/o).toFixed(1),t[3]=((e.top+e.height)/l).toFixed(1),i.push(t)}),t.frameBoxs=JSON.stringify(i)}else t.frameBoxs="";t.frameSelect=this.form.detectType,t.targetNumber=this.form.targetNumber?this.form.targetNumber:0,this.form.stayTiming&&this.form.stayTimeUnit&&("秒钟"==this.form.stayTimeUnit?t.setTime=this.form.stayTiming:"分钟"==this.form.stayTimeUnit?t.setTime=60*this.form.stayTiming:t.setTime=60*this.form.stayTiming*60),this.form.leaveTiming&&this.form.leaveTimeUnit&&("秒钟"==this.form.stayTimeUnit?t.setTime=this.form.leaveTiming:"分钟"==this.form.stayTimeUnit?t.setTime=60*this.form.leaveTiming:t.setTime=60*this.form.leaveTiming*60),this.loading=!0,this.checkedTaskId?(t.id=this.checkedTaskId,Object(s["i"])(t).then(e=>{200==e.code&&(this.$message({type:"success",message:"修改成功"}),this.$router.push("/task/target"))}).finally(()=>{this.loading=!1})):Object(s["a"])(t).then(e=>{200==e.code&&(this.$message({type:"success",message:"添加成功"}),this.$router.push("/task/target"))}).finally(()=>{this.loading=!1})}else this.form.location.length>0&&0==this.markList.length&&this.$message.error("请框选需要监测的监控区域")})},resetForm(){this.form={taskName:"",taskLevel:"",model:[],taskDesc:"",date:"",selfDate:"",timeRange:"",duration:"",selfDuration:"",selfDurationUnit:"",location:[],detectType:"",rateLevel:"0",targetNumber:"",stayTiming:"",stayTimeUnit:"",leaveTiming:"",leaveTimeUnit:"",taskStatus:""},this.markList=[]},handleDetectTypeChange(e){1==e?(this.modelPlaceholder="请选择算法模型(最多三个)",this.modelLimit=3,this.markList=[]):(this.modelPlaceholder="请选择算法模型(最多一个)",this.modelLimit=1,this.form.model.length>1&&(this.form.model=[]))},initDrawReact(){var e=document.getElementById("drawArea");e.onmousedown=t=>{if(t.stopPropagation(),1!=this.form.detectType)if(this.markList.length<3){var i=document.createElement("div");i.className="outside-frame",i.style.boxSizing="border-box",i.style.borderColor="#ff0000",i.style.backgroundColor="#ff0000",i.style.opacity="0.5",i.style.position="absolute",i.style.display="none",document.querySelector(".frame-list").appendChild(i);var a,o,s,l,r=e.getBoundingClientRect(),n={},m={};i.style.display="block",n={x:t.clientX-r.x,y:t.clientY-r.y};var c=t.clientX-r.x,d=t.clientY-r.y;document.onmousemove=e=>{e.stopPropagation();var t=e.clientX-r.x,n=e.clientY-r.y;t>=c&&n<d?(a=e.clientX>=r.right?r.width-c:t-c,l=c,o=e.clientY<=r.top?d:d-n,s=e.clientY<=r.top?0:n,m={x:c+a,y:d-o}):t<c&&n<d?(a=e.clientX<=r.left?c:c-t,l=e.clientX<=r.left?0:t,o=e.clientY<=r.top?d:d-n,s=e.clientY<=r.top?0:n,m={x:c-a,y:d-o}):t<c&&n>=d?(a=e.clientX<=r.left?c:c-t,l=e.clientX<=r.left?0:t,o=e.clientY>=r.bottom?r.height-d:n-d,s=d,m={x:c-a,y:d+o}):t>=c&&n>=d&&(a=e.clientX>=r.right?r.width-c:t-c,l=c,o=e.clientY>=r.bottom?r.height-d:n-d,s=d,m={x:c+a,y:d+o}),i.style.width=a+"px",i.style.height=o+"px",i.style.top=s+"px",i.style.left=l+"px"},document.onmouseup=e=>{e.stopPropagation(),document.onmousemove=null,document.onmouseup=null;var t={reactWidth:a,reactHeight:o,reactTop:s,reactLeft:l,beginPoint:n,endPoint:m};if(t.reactWidth&&t.reactHeight&&t.reactTop&&t.reactLeft){t.reactWidth<40&&(t.reactWidth=40),t.reactHeight<40&&(t.reactHeight=40),i.remove();var r={width:t.reactWidth,height:t.reactHeight,top:t.reactTop,left:t.reactLeft,index:this.markList.length+1};this.markList.push(r),this.$nextTick(()=>{this.hornStretchEvent(),this.frameDragEvent()})}else i.remove()}}else this.$message({type:"warning",message:"一次性最多框选三个监控区域"})}},frameDragEvent(){for(var e=this,t=document.querySelectorAll(".outside-frame"),i=0;i<t.length;i++)(function(e,i){t[e].onmousedown=a=>{a.stopPropagation(),null!=i.activeFrameIndex?i.activeFrameIndex!=e&&(i.activeFrameIndex=e):i.activeFrameIndex=e;var o,s,l,r,n=a.clientX-t[e].offsetLeft,m=a.clientY-t[e].offsetTop;document.onmousemove=i=>{i.stopPropagation(),t[e].style.left=i.clientX-n+"px",t[e].style.top=i.clientY-m+"px";let a=t[e].offsetWidth,o=t[e].offsetHeight,s=t[e].offsetLeft,l=t[e].offsetTop,r=document.getElementById("drawArea").clientWidth,c=document.getElementById("drawArea").clientHeight;s<=0&&(t[e].style.left="0px"),s+a>=r&&(t[e].style.left=r-a+"px"),l<=0&&(t[e].style.top="0px"),l+o>=c&&(t[e].style.top=c-o+"px")},document.onmouseup=()=>{a.stopPropagation(),document.onmousemove=null,document.onmouseup=null,o=Number(t[e].style.width.split("px")[0]),s=Number(t[e].style.height.split("px")[0]),l=Number(t[e].style.top.split("px")[0]),r=Number(t[e].style.left.split("px")[0]);var n=t[e].getAttribute("id");i.markList.forEach(e=>{n==e.index&&(e.width=o,e.height=s,e.top=l,e.left=r)})}},t[e].onclick=e=>{e.stopPropagation()}})(i,e)},hornStretchEvent(){for(var e,t,i,a,o=document.querySelectorAll(".outside-frame"),s=document.getElementById("drawArea"),l=(s.getBoundingClientRect(),this),r=document.querySelectorAll(".tl-horn"),n=0;n<r.length;n++)(function(s,l){r[s].onmousedown=n=>{n.stopPropagation();var m=r[s].parentNode.offsetWidth,c=r[s].parentNode.offsetHeight,d=n.clientX,p=n.clientY,u=r[s].parentNode.offsetLeft,f=r[s].parentNode.offsetTop,h=40,g=40;document.onmousemove=e=>{if(h>m-(e.clientX-d))return;if(g>c-(e.clientY-p))return;o[s].style.left=u+(e.clientX-d)+"px",o[s].style.top=f+(e.clientY-p)+"px";let t=o[s].offsetWidth,i=o[s].offsetHeight,a=o[s].offsetLeft,l=o[s].offsetTop,r=document.getElementById("drawArea").clientWidth,n=document.getElementById("drawArea").clientHeight;a<=0&&e.clientX<=d?o[s].style.left="0px":o[s].style.width=m-(e.clientX-d)+"px",a+t>=r&&(o[s].style.left=r-t+"px"),l<=0&&e.clientY<=p?o[s].style.top="0px":o[s].style.height=c-(e.clientY-p)+"px",l+i>=n&&(o[s].style.top=n-i+"px")},document.onmouseup=r=>{document.onmousemove=null,document.onmouseup=null,e=Number(o[s].style.width.split("px")[0]),t=Number(o[s].style.height.split("px")[0]),i=Number(o[s].style.top.split("px")[0]),a=Number(o[s].style.left.split("px")[0]);var n=o[s].getAttribute("id");l.markList.forEach(o=>{n==o.index&&(o.width=e,o.height=t,o.top=i,o.left=a)})}}})(n,l);var m=document.querySelectorAll(".tc-horn");for(n=0;n<m.length;n++)(function(s,l){m[s].onmousedown=r=>{r.stopPropagation();var n=m[s].parentNode.offsetWidth,c=m[s].parentNode.offsetHeight,d=r.clientX,p=r.clientY,u=(m[s].parentNode.offsetLeft,m[s].parentNode.offsetTop),f=40,h=40;document.onmousemove=e=>{if(f>n-(e.clientX-d))return;if(h>c-(e.clientY-p))return;o[s].style.top=u+(e.clientY-p)+"px";let t=o[s].offsetWidth,i=o[s].offsetHeight,a=o[s].offsetLeft,l=o[s].offsetTop,r=document.getElementById("drawArea").clientWidth,m=document.getElementById("drawArea").clientHeight;a<=0&&(o[s].style.left="0px"),a+t>=r&&(o[s].style.left=r-t+"px"),l<=0&&e.clientY<=p?o[s].style.top="0px":o[s].style.height=c-(e.clientY-p)+"px",l+i>=m&&(o[s].style.top=m-i+"px")},document.onmouseup=r=>{document.onmousemove=null,document.onmouseup=null,e=Number(o[s].style.width.split("px")[0]),t=Number(o[s].style.height.split("px")[0]),i=Number(o[s].style.top.split("px")[0]),a=Number(o[s].style.left.split("px")[0]);var n=o[s].getAttribute("id");l.markList.forEach(o=>{n==o.index&&(o.width=e,o.height=t,o.top=i,o.left=a)})}}})(n,l);var c=document.querySelectorAll(".tr-horn");for(n=0;n<c.length;n++)(function(s,l){c[s].onmousedown=r=>{r.stopPropagation();var n=c[s].parentNode.offsetWidth,m=c[s].parentNode.offsetHeight,d=r.clientX,p=r.clientY,u=(c[s].parentNode.offsetLeft,c[s].parentNode.offsetTop),f=40,h=40;document.onmousemove=e=>{if(f>n-(d-e.clientX))return;if(h>m-(e.clientY-p))return;o[s].style.top=u+(e.clientY-p)+"px";let t=o[s].offsetWidth,i=o[s].offsetHeight,a=o[s].offsetLeft,l=o[s].offsetTop,r=document.getElementById("drawArea").clientWidth,c=document.getElementById("drawArea").clientHeight;a<=0&&(o[s].style.left="0px"),a+t>=r&&e.clientX>=d?o[s].style.left=r-t+"px":o[s].style.width=n+(e.clientX-d)+"px",l<=0&&e.clientY<=p?o[s].style.top="0px":o[s].style.height=m-(e.clientY-p)+"px",l+i>=c&&(o[s].style.top=c-i+"px")},document.onmouseup=r=>{document.onmousemove=null,document.onmouseup=null,e=Number(o[s].style.width.split("px")[0]),t=Number(o[s].style.height.split("px")[0]),i=Number(o[s].style.top.split("px")[0]),a=Number(o[s].style.left.split("px")[0]);var n=o[s].getAttribute("id");l.markList.forEach(o=>{n==o.index&&(o.width=e,o.height=t,o.top=i,o.left=a)})}}})(n,l);var d=document.querySelectorAll(".bl-horn");for(n=0;n<d.length;n++)(function(s,l){d[s].onmousedown=r=>{r.stopPropagation();var n=d[s].parentNode.offsetWidth,m=d[s].parentNode.offsetHeight,c=r.clientX,p=r.clientY,u=d[s].parentNode.offsetLeft,f=(d[s].parentNode.offsetTop,40),h=40;document.onmousemove=e=>{if(f>n-(e.clientX-c))return;if(h>m+(e.clientY-p))return;o[s].style.left=u+(e.clientX-c)+"px";let t=o[s].offsetWidth,i=o[s].offsetHeight,a=o[s].offsetLeft,l=o[s].offsetTop,r=document.getElementById("drawArea").clientWidth,d=document.getElementById("drawArea").clientHeight;a<=0&&e.clientX<=c?o[s].style.left="0px":o[s].style.width=n-(e.clientX-c)+"px",a+t>=r&&(o[s].style.left=r-t+"px"),l<=0&&(o[s].style.top="0px"),l+i>=d&&e.clientY>=p?o[s].style.top=d-i+"px":o[s].style.height=m+(e.clientY-p)+"px"},document.onmouseup=r=>{document.onmousemove=null,document.onmouseup=null,e=Number(o[s].style.width.split("px")[0]),t=Number(o[s].style.height.split("px")[0]),i=Number(o[s].style.top.split("px")[0]),a=Number(o[s].style.left.split("px")[0]);var n=o[s].getAttribute("id");l.markList.forEach(o=>{n==o.index&&(o.width=e,o.height=t,o.top=i,o.left=a)})}}})(n,l);var p=document.querySelectorAll(".bc-horn");for(n=0;n<p.length;n++)(function(s,l){p[s].onmousedown=r=>{r.stopPropagation();p[s].parentNode.offsetWidth;var n=p[s].parentNode.offsetHeight,m=(r.clientX,r.clientY),c=(p[s].parentNode.offsetLeft,p[s].parentNode.offsetTop,40);document.onmousemove=e=>{if(c>n+(e.clientY-m))return;let t=o[s].offsetWidth,i=o[s].offsetHeight,a=o[s].offsetLeft,l=o[s].offsetTop,r=document.getElementById("drawArea").clientWidth,d=document.getElementById("drawArea").clientHeight;a<=0&&(o[s].style.left="0px"),a+t>=r&&(o[s].style.left=r-t+"px"),l<=0&&(o[s].style.top="0px"),l+i>=d&&e.clientY>=m?o[s].style.top=d-i+"px":o[s].style.height=n+(e.clientY-m)+"px"},document.onmouseup=r=>{document.onmousemove=null,document.onmouseup=null,e=Number(o[s].style.width.split("px")[0]),t=Number(o[s].style.height.split("px")[0]),i=Number(o[s].style.top.split("px")[0]),a=Number(o[s].style.left.split("px")[0]);var n=o[s].getAttribute("id");l.markList.forEach(o=>{n==o.index&&(o.width=e,o.height=t,o.top=i,o.left=a)})}}})(n,l);var u=document.querySelectorAll(".br-horn");for(n=0;n<u.length;n++)(function(s,l){u[s].onmousedown=r=>{r.stopPropagation();var n=u[s].parentNode.offsetWidth,m=u[s].parentNode.offsetHeight,c=r.clientX,d=r.clientY,p=(u[s].parentNode.offsetLeft,u[s].parentNode.offsetTop,40),f=40;document.onmousemove=e=>{if(p>n-(c-e.clientX))return;if(f>m+(e.clientY-d))return;let t=o[s].offsetWidth,i=o[s].offsetHeight,a=o[s].offsetLeft,l=o[s].offsetTop,r=document.getElementById("drawArea").clientWidth,u=document.getElementById("drawArea").clientHeight;a<=0&&(o[s].style.left="0px"),a+t>=r&&e.clientX>=c?o[s].style.left=r-t+"px":o[s].style.width=n+(e.clientX-c)+"px",l<=0&&(o[s].style.top="0px"),l+i>=u&&e.clientY>=d?o[s].style.top=u-i+"px":o[s].style.height=m+(e.clientY-d)+"px"},document.onmouseup=r=>{document.onmousemove=null,document.onmouseup=null,e=Number(o[s].style.width.split("px")[0]),t=Number(o[s].style.height.split("px")[0]),i=Number(o[s].style.top.split("px")[0]),a=Number(o[s].style.left.split("px")[0]);var n=o[s].getAttribute("id");l.markList.forEach(o=>{n==o.index&&(o.width=e,o.height=t,o.top=i,o.left=a)})}}})(n);var f=document.querySelectorAll(".lc-horn");for(n=0;n<f.length;n++)(function(s,l){f[s].onmousedown=r=>{r.stopPropagation();var n=f[s].parentNode.offsetWidth,m=f[s].parentNode.offsetHeight,c=r.clientX,d=r.clientY,p=f[s].parentNode.offsetLeft,u=(f[s].parentNode.offsetTop,40),h=40;document.onmousemove=e=>{if(u>n-(e.clientX-c))return;if(h>m-(e.clientY-d))return;o[s].style.left=p+(e.clientX-c)+"px";let t=o[s].offsetWidth,i=o[s].offsetHeight,a=o[s].offsetLeft,l=o[s].offsetTop,r=document.getElementById("drawArea").clientWidth,f=document.getElementById("drawArea").clientHeight;a<=0&&e.clientX<=c?o[s].style.left="0px":o[s].style.width=n-(e.clientX-c)+"px",a+t>=r&&(o[s].style.left=r-t+"px"),l<=0&&(o[s].style.top="0px"),l+i>=f&&(o[s].style.top=f-i+"px")},document.onmouseup=r=>{document.onmousemove=null,document.onmouseup=null,e=Number(o[s].style.width.split("px")[0]),t=Number(o[s].style.height.split("px")[0]),i=Number(o[s].style.top.split("px")[0]),a=Number(o[s].style.left.split("px")[0]);var n=o[s].getAttribute("id");l.markList.forEach(o=>{n==o.index&&(o.width=e,o.height=t,o.top=i,o.left=a)})}}})(n,l);var h=document.querySelectorAll(".rc-horn");for(n=0;n<h.length;n++)(function(s,l){h[s].onmousedown=r=>{r.stopPropagation();var n=h[s].parentNode.offsetWidth,m=h[s].parentNode.offsetHeight,c=r.clientX,d=r.clientY,p=(h[s].parentNode.offsetLeft,h[s].parentNode.offsetTop,40),u=40;document.onmousemove=e=>{if(p>n-(c-e.clientX))return;if(u>m+(e.clientY-d))return;let t=o[s].offsetWidth,i=o[s].offsetHeight,a=o[s].offsetLeft,l=o[s].offsetTop,r=document.getElementById("drawArea").clientWidth,f=document.getElementById("drawArea").clientHeight;a<=0&&(o[s].style.left="0px"),a+t>=r&&e.clientX>=c?o[s].style.left=r-t+"px":o[s].style.width=n+(e.clientX-c)+"px",l<=0&&(o[s].style.top="0px"),l+i>=f&&(o[s].style.top=f-i+"px")},document.onmouseup=r=>{document.onmousemove=null,document.onmouseup=null,e=Number(o[s].style.width.split("px")[0]),t=Number(o[s].style.height.split("px")[0]),i=Number(o[s].style.top.split("px")[0]),a=Number(o[s].style.left.split("px")[0]);var n=o[s].getAttribute("id");l.markList.forEach(o=>{n==o.index&&(o.width=e,o.height=t,o.top=i,o.left=a)})}}})(n,l)},removeFrame(e){this.markList.splice(e,1)},handleClick(e){e.stopPropagation(),this.activeFrameIndex=null},disabledDate(e){const t=new Date;return t.setHours(23,59,59,999),e&&e<t},fallback(){this.$router.push("/task/target")}}},n=r,m=(i("3934"),i("2877")),c=Object(m["a"])(n,a,o,!1,null,"49085ad5",null);t["default"]=c.exports},3934:function(e,t,i){"use strict";i("bd47")},"3ce7":function(e,t,i){"use strict";i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"f",(function(){return l})),i.d(t,"e",(function(){return r})),i.d(t,"a",(function(){return n})),i.d(t,"i",(function(){return m})),i.d(t,"h",(function(){return c})),i.d(t,"g",(function(){return d})),i.d(t,"b",(function(){return p}));var a=i("ccea");function o(){return Object(a["a"])({url:"/createdetectiontask/selectAimodels",method:"get"})}function s(){return Object(a["a"])({url:"/boards/location",method:"get"})}function l(e){return Object(a["a"])({url:"/tasks/gettasklist",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/tasks/getDetectionTask",method:"get",params:e})}function n(e){return Object(a["a"])({url:"/createdetectiontask/insertDetectiontask",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/createdetectiontask/updateDetectiontask",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/createdetectiontask/startvideostream",method:"get",params:e})}function d(e){return Object(a["a"])({url:"/createdetectiontask/stopvideostream",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/tasks/deletetask",method:"get",params:e})}},bd47:function(e,t,i){}}]);