(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3a0ec78"],{"7bf7":function(t,e,i){},"80e4":function(t,e,i){"use strict";i("7bf7")},ecc9:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"main-wrapper card"},[s("div",{staticClass:"filter-params"},[s("div",{staticClass:"filter-control"},[s("el-input",{staticClass:"search-input",attrs:{"prefix-icon":"el-icon-search",size:"medium",placeholder:"搜索算法",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterList(e)}},model:{value:t.params.keyword,callback:function(e){t.$set(t.params,"keyword",e)},expression:"params.keyword"}})],1)]),t.isfirst||"全部"!=t.activeDetectType&&"目标检测"!=t.activeDetectType?t._e():s("div",{staticClass:"filter-container"},[s("div",{staticClass:"filter-options",class:{hidden:this.sceneContainerHeight>88&&!t.isShowMore}},[s("div",{staticClass:"option",class:{"atv-option":"全部"==t.activeScene},on:{click:function(e){return t.filterScene("全部")}}},[t._v("全部 ")]),t._l(t.sceneList,(function(e,i){return s("div",{key:i,staticClass:"option",class:{"atv-option":t.activeScene==e.modelType},on:{click:function(i){return t.filterScene(e.modelType)}}},[t._v(t._s(e.modelType))])}))],2),this.sceneContainerHeight>88&&!t.isShowMore?s("div",{staticClass:"option-action text-primary pointer",on:{click:t.showMoreScene}},[t._v("更多")]):t._e(),this.sceneContainerHeight>88&&t.isShowMore?s("div",{staticClass:"option-action text-primary pointer",on:{click:t.hiddenScene}},[t._v("收起 ")]):t._e()]),s("div",{staticClass:"list-action flex-between"},[s("div",{staticClass:"list-total"},[t._v("为您找到相关算法"),s("span",{staticClass:"total-count"},[t._v(t._s(t.totalCount))]),t._v("个")]),s("div",{staticClass:"right-button"})]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingList,expression:"loadingList"}],staticClass:"algorithm-list"},[t._l(t.renderAlgorithm,(function(e,i){return s("div",{key:i,staticClass:"algorithm-card",on:{click:function(i){return i.stopPropagation(),t.viewDetail(e)}}},[s("div",{staticClass:"thumbnail"},[s("el-image",{attrs:{src:e.imgs,lazy:"",draggable:"false"}})],1),s("div",{staticClass:"name"},[t._v(t._s(e.modelName))]),s("div",{staticClass:"scene"},[t._v(t._s(/,/.test(e.scene)?e.scene.replace(/,/g," "):e.scene)+" ")]),s("div",{staticClass:"desciription",attrs:{title:e.modelExplain}},[t._v(t._s(e.modelExplain))]),e.aiModel.modelSource?s("div",{staticClass:"source"},[0==e.aiModel.modelSource?s("el-tag",{attrs:{type:"info",size:"mini"}},[t._v("系统默认")]):s("el-tag",{attrs:{size:"mini"}},[t._v("用户上传")])],1):t._e(),e.aiModel.modelSource&&1==e.aiModel.modelSource?s("div",{staticClass:"action"},[s("div",{staticClass:"status"}),s("div",{staticClass:"more"},[s("el-dropdown",{attrs:{size:"small"},on:{command:function(i){return t.handleCommand(i,e)}}},[s("span",{staticClass:"el-dropdown-link"},[t._v(" 更多"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"delete"}},[s("i",{staticClass:"el-icon-delete"}),t._v("卸载 ")])],1)],1)],1)]):t._e()])})),0==t.renderAlgorithm.length?s("el-empty",{staticStyle:{margin:"0 auto 60px"},attrs:{description:"暂无数据"}}):t._e()],2)]),s("el-dialog",{attrs:{title:"导入模型",visible:t.uploadDialogVisible,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(e){t.uploadDialogVisible=e}}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogLoading,expression:"dialogLoading"}],staticClass:"dialog-wrap"},[s("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"",accept:".zip","auto-upload":!1,"file-list":t.fileList,limit:1,"on-change":t.handleFileChange,"on-remove":t.handleRemoveFile}},[s("i",{staticClass:"el-icon-upload"}),s("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),s("em",[t._v("点击上传")])]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传zip文件，一次性只能上传一个且不超过100M")])])],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(e){t.uploadDialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary",size:"small",disabled:t.dialogLoading},on:{click:t.submitCreate}},[t._v("确 定")])],1)]),s("el-dialog",{attrs:{title:"我想要新算法",visible:t.demandDialogVisible,width:"38%","close-on-click-modal":!1},on:{"update:visible":function(e){t.demandDialogVisible=e}}},[s("div",{staticClass:"demand-wrap"},[s("div",{staticClass:"title"},[t._v("专注视觉 AI 算法定制")]),s("div",{staticClass:"sub-title"},[t._v("1000+种 AI 场景落地经验")]),s("div",{staticClass:"sub-title"},[t._v("最快 8 小时生产一个全新算法")]),s("div",{staticClass:"qrcode"},[s("img",{attrs:{src:i("feca"),alt:""}})])])])],1)},a=[],o=(i("14d9"),i("ccea"));function l(){return Object(o["a"])({url:"/plan/getModelTypes",method:"get"})}function n(t){return Object(o["a"])({url:"/plan/getPlans",method:"get",params:t})}function r(t){return Object(o["a"])({url:"/plan/saveModelMsg",method:"post",headers:{"Content-Type":"multipart/form-data"},data:t})}function c(t){return Object(o["a"])({url:"/plan/unload",method:"get",params:t})}var d=i("b775"),h={components:{},props:{},data(){return{loading:!1,isfirst:!0,loadingList:!1,params:{scene:"",keyword:""},activeDetectType:"全部",sceneList:[],activeScene:"全部",sceneContainerHeight:0,isShowMore:!1,totalCount:0,algorithmList:[],renderAlgorithm:[],uploadDialogVisible:!1,demandDialogVisible:!1,fileList:[],dialogLoading:!1}},created(){this.inintLoading()},mounted(){window.addEventListener("resize",this.computeSceneContainerHeight)},beforeDestroy(){window.removeEventListener("resize",this.computeSceneContainerHeight)},watch:{},computed:{},methods:{inintLoading(){this.loading=!0;var t=[l(),n(this.params)];Promise.all(t).then(t=>{200==t[0].code&&(this.sceneList=t[0].data,this.sceneList.length>0&&(this.isfirst=!1,this.$nextTick(()=>{this.computeSceneContainerHeight()}))),200==t[1].code&&(this.totalCount=t[1].count,t[1].data.length>0&&(this.algorithmList=t[1].data,this.algorithmList.forEach(t=>{t.imgs&&(t.imgs=d["a"].split("/api")[0]+t.imgs)}),this.renderAlgorithm=[...this.algorithmList]))}).finally(()=>{this.loading=!1})},getAlgorithmList(){this.loadingList=!0,this.algorithmList=[],n(this.params).then(t=>{200==t.code&&(this.totalCount=t.count,t.data.length>0?(this.renderAlgorithm=t.data,this.renderAlgorithm.forEach(t=>{t.imgs&&(t.imgs=d["a"].split("/api")[0]+t.imgs)})):this.renderAlgorithm=[])}).finally(()=>{this.loadingList=!1})},filterScene(t){this.activeScene=t,this.params.scene="全部"==t?"":t,this.getAlgorithmList()},computeSceneContainerHeight(){var t=document.querySelectorAll(".filter-container"),e=t[1].querySelector(".filter-options"),i=e.getBoundingClientRect().height;this.sceneContainerHeight=i},showMoreScene(){this.isShowMore=!0},hiddenScene(){this.isShowMore=!1},filterList(){this.getAlgorithmList()},viewDetail(t){this.$router.push({path:"/algorithm/tryout/target",query:{id:t.id}})},createAlgorithm(){this.fileList=[],this.uploadDialogVisible=!0},handleCommand(t,e){console.log(t,e),"delete"==t&&this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(()=>{this.loading=!0,c({Id:e.id}).then(t=>{200==t.code&&(this.$message({type:"success",message:"模型卸载成功!"}),this.getProjectList())}).finally(()=>{this.loading=!1})})},submitCreate(){if(this.fileList.length>0){this.dialogLoading=!0;let t=new FormData,e=this.fileList[0].raw;t.append("modelFile",e),r(t).then(t=>{200==t.code&&(this.$message({type:"success",message:"上传成功!"}),this.uploadDialogVisible=!1,this.getAlgorithmList())}).finally(()=>{this.dialogLoading=!1})}else this.$message({message:"请上传模型文件",type:"warning"})},handleFileChange(t,e){var i=t.size/1024/1024;i<=100?this.fileList=e:this.$message({message:"上传文件的大小不能超过100M",type:"warning"})},handleRemoveFile(t,e){this.fileList=e},toMoreAlgorithm(){this.demandDialogVisible=!0}}},g=h,m=(i("80e4"),i("2877")),p=Object(m["a"])(g,s,a,!1,null,"491c700c",null);e["default"]=p.exports},feca:function(t,e,i){t.exports=i.p+"img/wxcode.11819667.jpg"}}]);