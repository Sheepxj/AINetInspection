(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-131068ac"],{"21a8":function(t,e,a){},"49da":function(t,e,a){"use strict";a("21a8")},"8c48":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app"},[a("van-nav-bar",{attrs:{title:"预警事件详情","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mask"},[a("div",{staticClass:"content"},[a("p",[t._v("您好！")]),a("p",[t._v("检测到在 "+t._s(t.eventInfo.alertTime)+" 存在异常活动，")]),a("p",[t._v("事件类型："),a("strong",[t._v(t._s(t.eventInfo.alertType))])]),a("p",[t._v("发生地点："),a("strong",[t._v(t._s(t.eventInfo.cameraPosition))])]),a("p",[t._v("风险等级："),a("strong",[t._v(t._s(t.eventInfo.alertLevel))])]),a("p",[t._v("事件截图：")]),a("p",[a("img",{attrs:{src:t.eventInfo.capturedImage,alt:""}})])])]),a("div",{staticClass:"bottom-action"},[a("div",{staticClass:"prev",on:{click:t.viewPrevEvent}},[t._v("上一条")]),a("div",{staticClass:"next",on:{click:t.viewNextEvent}},[t._v("下一条")])])],1)},i=[],r=(a("14d9"),a("b562")),s=a("b775"),o=a("247b"),l={components:{livePlayer:o["a"]},props:{},data(){return{loading:!1,params:{pageNum:"",pageSize:"",searchText:"",alertTypes:[],cameraPosition:[],startTime:"",endTime:""},eventList:[],eventId:"",eventInfo:{cameraPosition:"",alertType:"",alertLevel:"",alertTime:"",capturedImage:"",capturedVideo:""},current:null}},created(){this.$route.query.id&&(this.eventId=this.$route.query.id,this.getWarningEventDetail())},mounted(){},watch:{},computed:{},methods:{onClickLeft(){this.$router.push("/app/index")},initLoading(){var t=[Object(r["c"])(this.params),Object(r["b"])({alertId:this.eventId})];this.loading=!0,Promise.all(t).then(t=>{if(200==t[0].code){this.eventList=t[0].data;for(let t=0;t<this.eventList.length;t++)this.eventList[t].alertId==this.eventId&&(this.current=t)}200==t[1].code&&(this.eventInfo.cameraPosition=t[1].data.cameraPosition,this.eventInfo.alertType=t[1].data.alertType,this.eventInfo.alertLevel=t[1].data.alertLevel,this.eventInfo.alertTime=t[1].data.alertTime,this.eventInfo.capturedImage=s["a"].split("/api")[0]+t[1].data.capturedImage,this.eventInfo.capturedVideo=s["a"].split("/api")[0]+t[1].data.capturedVideo)}).finally(()=>{this.loading=!1})},getWarningEventDetail(){this.loading=!0,Object(r["b"])({alertId:this.eventId}).then(t=>{200==t.code&&(this.eventInfo.cameraPosition=t.data.cameraPosition,this.eventInfo.alertType=t.data.alertType,this.eventInfo.alertLevel=t.data.alertLevel,this.eventInfo.alertTime=t.data.alertTime,this.eventInfo.capturedImage=s["a"].split("/api")[0]+t.data.capturedImage,this.eventInfo.capturedVideo=s["a"].split("/api")[0]+t.data.capturedVideo)}).finally(()=>{this.loading=!1})},viewPrevEvent(){0!=this.current?(this.eventId=this.eventList[this.current-1].alertId,this.getWarningEventDetail()):this.$toast("当前已是第一条")},viewNextEvent(){this.current!=this.eventList.length-1?(this.eventId=this.eventList[this.current+1].alertId,this.getWarningEventDetail()):this.$toast("当前已是最后一条")}}},d=l,c=(a("49da"),a("2877")),v=Object(c["a"])(d,n,i,!1,null,"464884bd",null);e["default"]=v.exports},b562:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return s}));var n=a("ccea");function i(){return Object(n["a"])({url:"/boards/location",method:"get"})}function r(t){return Object(n["a"])({url:"/warningTable/selectwarning",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/warningTable/selectbytaskid",method:"get",params:t})}}}]);